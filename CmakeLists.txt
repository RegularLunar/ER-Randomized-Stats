cmake_minimum_required(VERSION 3.15)
project(RandomizedStats)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Create the DLL
add_library(RandomizedStats SHARED
    dllmain.cpp
    pch.cpp
    pch.h
)

# Precompiled header setup
target_precompile_headers(RandomizedStats PRIVATE pch.h)

# Link Windows libraries
target_link_libraries(RandomizedStats PRIVATE
    psapi
)

# Set output name and properties
set_target_properties(RandomizedStats PROPERTIES
    OUTPUT_NAME "RandomizedStats"
    PREFIX ""
    SUFFIX ".dll"
)

# Windows-specific compiler flags
if(MSVC)
    target_compile_options(RandomizedStats PRIVATE /W4)
endif()